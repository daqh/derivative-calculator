<html>

<head>
    <script src="jquery.js"></script>
    <script src="plot.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./semantic-ui/semantic.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="./semantic-ui/semantic.min.js"></script>
    <script src="math.js" type="text/javascript"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>

<body style="background-color: lightblue;">

    <div style="padding: 20px;">
        <h1 class="ui inverted header">
            <a href="./index.html">
                DerivApp
            </a>
        </h1>

        <div class="ui middle aligned grid" style="height: 88vh;">

            <div class="ui stackable row">
                <div class="ui eight wide column">

                    <div class="ui raised segments">

                        <div class="ui inverted orange segment">
                            Derivata di una funzione @
                        </div>

                        <div class="ui segment" id="derivative-box">
                            <form action="" class="ui form">
                                <label for="expressison">Espressione</label>
                                <div class="ui fluid massive input">
                                    <input autocomplete="off" id="expression" name="expression" type="text">
                                </div>
                                <div class="ui hidden divider"></div>
                                <div class="ui fluid input">
                                    <button class="ui primary big button">
                                        Calcola
                                    </button>
                                </div>
                                <div class="ui divider"></div>
                                <div id="result"></div>
                            </form>
                        </div>
                    </div>

                </div>
                <div class="ui eight wide column">
                    <div class="ui segment">
                        <div id="plot"></div>
                    </div>
                    <div class="ui info message">
                        <h2 class="ui header">La derivata di una funzione</h2>
                        <p>Questo strumento Ã¨ stato realizzato...</p>
                        <h3>Come lo abbiamo realizzato?</h3>
                    </div>
                </div>
            </div>
        </div>

        <div id="pretty"></div>
    </div>

    <script src="script.js"></script>
    <script>
        function draw() {
            try {
                const expr = math.compile(expression)

                const xValues = math.range(-10, 10, 0.5).toArray()
                const yValues = xValues.map(function (x) {
                    return expr.evaluate({ x: x })
                })

                const trace1 = {
                    x: xValues,
                    y: yValues,
                    type: 'scatter'
                }

                const data = [trace1]
                Plotly.newPlot(
                    'plot',
                    data, {
                    title: expression,
                    showlegend: false
                }, {
                    staticPlot: true
                });

            } catch (err) {
                console.error(err)
            }

        }

        draw()
    </script>
</body>

</html>